var t=Object.defineProperty,e=(e,s,i)=>(((e,s,i)=>{s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i})(e,"symbol"!=typeof s?s+"":s,i),i);import{P as s}from"./phaser.39311b5c.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class i extends Phaser.Scene{constructor(){super("Boot")}preload(){this.load.setPath("./assets"),this.load.image("menu-bg","menu-bg.jpg"),this.load.image("loading-bar","loading-bar.png")}create(){this.scene.start("Preload")}}const h=t=>Phaser.Display.Color.HexStringToColor(t),a={white:h("#FFFFFF"),black:h("#000000"),gray:h("#696969"),debug:h("#ff0000"),primary:h("#dd6b20")},n=t=>{const{height:e,width:s}=t.scale;return new Phaser.Geom.Rectangle(0,0,s,e)},o=(t,e,s)=>{const{gap:i=0,offset:h}=s||{},a=(null==h?void 0:h.y)||0,o=(null==h?void 0:h.x)||0;let r=i;for(const n of e)r+=n.displayHeight;const{centerX:l,centerY:d}=n(t),c=e.length;let g=-r/c;for(const n of e)n.setPosition(l+o,d+g+n.displayHeight/c+a),g+=n.displayHeight+i},r=(t,e)=>{e.cameras.main.fadeOut(250),e.time.addEvent({delay:250,callback:function(){e.scene.start(t)},callbackScope:e})},l=t=>null==t;class d extends Phaser.GameObjects.Text{constructor(t,{text:e,style:s,x:i=0,y:h=0,alpha:a}){super(t,i,h,e,c(s)),this.setOrigin(.5,.5),l(a)||this.setAlpha(a),t.add.existing(this)}}const c=t=>{const e={fontSize:40,align:"center",fontFamily:"Arial",stroke:a.primary.rgba,color:a.black.rgba};return t=t||{},Object.assign(e,t),e.strokeThickness||(e.strokeThickness=e.fontSize*("bold"===t.fontStyle?.1:.05)),e},g=(t,e,s=50,i)=>{const{duration:h=500,onComplete:a,...n}=i||{};t.scene.tweens.add({targets:t,alpha:1,duration:h,[e]:t[e]+s,ease:t=>Phaser.Math.Easing.Back.Out(t,.1*Math.abs(s)),onComplete:a,onUpdate:e=>{t.emit("tweenupdate",e)},...n})};class u extends Phaser.GameObjects.Sprite{constructor(t,s,i){const{onComplete:h,revealYOffset:a=50}=i||{};super(t,0,0,s),e(this,"progress"),e(this,"progressValue",50),e(this,"text"),e(this,"initialLoadAnimationComplete",!1),e(this,"finished",!1),e(this,"xPadding",20),e(this,"yPadding",10),e(this,"revealYOffset"),e(this,"onComplete"),this.revealYOffset=a,this.onComplete=h,this.setAlpha(0),t.add.existing(this),this.text=new d(t,{text:"LOADING...",alpha:0,style:{fontSize:60}}),o(t,[this.text,this],{gap:20,offset:{y:-this.revealYOffset}}),this._initReveal(),this.scene.load.on("progress",this._handleLoadProgress,this)}_initReveal(){g(this.text,"y",this.revealYOffset),g(this,"y",this.revealYOffset,{delay:150,onComplete:()=>this._initLoading()})}_initLoading(){this.progress=this.scene.add.graphics(),this._tweenLoading({from:0,to:50,onComplete:()=>{this.initialLoadAnimationComplete=!0,this.finished||1!==this.progressValue||this._tweenLoading({from:51,to:100,onComplete:()=>this._finish()})}})}_handleLoadProgress(t){this.progressValue=t,this.initialLoadAnimationComplete&&(this.fillProgressToPercent(t),1===t&&this._finish())}fillProgressToPercent(t){this.progress.clear(),this.progress.fillStyle(a.primary.color,1),this.progress.fillRect(this.x-.5*this.width+this.xPadding,this.y-.5*this.height+this.yPadding,(this.width-2*this.xPadding)*t,this.height-2*this.yPadding)}_finish(){this.finished=!0,this.scene.time.delayedCall(500,(()=>{var t;null==(t=this.onComplete)||t.call(this)}))}_tweenLoading(t){this.scene.tweens.addCounter({from:t.from,to:t.to,duration:250,onUpdate:t=>{this.fillProgressToPercent(t.getValue()/100)},onComplete:()=>{var e;null==(e=null==t?void 0:t.onComplete)||e.call(t)},callbackScope:this})}}class p extends Phaser.Scene{constructor(){super("Preload"),e(this,"loadingBar")}preload(){this.add.sprite(0,0,"menu-bg").setOrigin(0,0),this.loadingBar=new u(this,"loading-bar",{onComplete:()=>{r("MainMenu",this)}}),this.load.setPath("./assets"),this.load.image("court","court.jpg"),this.load.image("seats","seats.png"),this.load.image("barrier","barrier.jpg"),this.load.image("invisible","invisible.png"),this.load.image("ball","ball.png"),this.load.image("backboard","backboard.jpg"),this.load.image("shoot-particle","shoot-particle.png"),this.load.image("mast","mast.png"),this.load.image("rim","rim.png"),this.load.atlas("net","net.png","net.json"),this.load.image("btn","btn.png"),this.load.image("btn-circle","btn-circle.png"),this.loadAudio("backboard"),this.loadAudio("shoot"),this.loadAudio("score-1"),this.loadAudio("score-2"),this.loadAudio("miss-1"),this.loadAudio("miss-2"),this.loadAudio("miss-3"),this.loadAudio("miss-4"),this.loadAudio("net")}loadAudio(t){this.load.audio(t,[".mp3",".ogg",".m4a",".wav"].map((e=>`${t}${e}`)))}}class y{constructor(t){e(this,"ballAtApex"),e(this,"ballReset"),e(this,"ballScored"),e(this,"ballMissed"),e(this,"scoreUpdated"),this.ballAtApex=new m(t,"BALL_AT_APEX"),this.ballReset=new m(t,"BALL_RESET"),this.ballScored=new m(t,"BALL_SCORED"),this.ballMissed=new m(t,"BALL_MISSED"),this.scoreUpdated=new m(t,"SCORE_UPDATED")}}class m{constructor(t,s){e(this,"_scene"),e(this,"_name"),this._scene=t,this._name=s}fire(t){this._scene.events.emit(this._name,t)}listen(t,e){this._scene.events.on(this._name,t,e)}stop(t,e){this._scene.events.on(this._name,t,e)}}class f extends Phaser.GameObjects.Container{constructor(t,s,i){super(t,s,i),e(this,"gameEvents"),e(this,"animation"),e(this,"image"),e(this,"leftWall"),e(this,"rightWall"),this.gameEvents=new y(this.scene),this.setVisible(!1),t.add.existing(this),this._init()}_init(){this.image=this.scene.physics.add.sprite(0,0,"net").setScale(.75).setOrigin(0,0),this.setDepth(4);const t=this.image.displayWidth,e=-t/2;this.image.setX(e),this.add(this.image),this._initAnimation(),this.leftWall=this._addWall(e+5),this.rightWall=this._addWall(e+t-5),this.gameEvents.ballScored.listen((()=>{this._animate(),this.scene.sound.play("net")}),this),this.setVisible(!0)}_initAnimation(){this.animation=this.image.anims.create({key:"net",frames:this.image.anims.generateFrameNames("net",{prefix:"net-",suffix:".png",start:1,end:5,zeroPad:2}),frameRate:15,repeat:0})}handleBallCollision(t){this._handleWallCollision(t,this.leftWall),this._handleWallCollision(t,this.rightWall)}disableDebugDisplay(){this.leftWall.body.debugShowBody=!1,this.rightWall.body.debugShowBody=!1,this.image.body.debugShowBody=!1}_animate(){this.image.play(this.animation,!0)}_addWall(t){const e=this.scene.physics.add.sprite(t,15,"invisible").setBodySize(1,this.image.displayHeight-15,!1).setImmovable(!0).setDebugBodyColor(a.debug.color).refreshBody();return this.add(e),e}_handleWallCollision(t,e){this.scene.physics.add.collider(t,e,(()=>{t.setVelocityX(-t.body.velocity.x)}),(()=>t.body.velocity.y>=0),this)}}class _ extends Phaser.GameObjects.Container{constructor(t,s,i){super(t,s,i),e(this,"gameEvents"),e(this,"frontRim"),e(this,"leftRim"),e(this,"rightRim"),e(this,"scoreIndicator"),e(this,"sound"),this.gameEvents=new y(this.scene),this.setVisible(!1),t.add.existing(this),this._init()}_init(){this.sound=this.scene.sound.add("backboard",{volume:.2}),this.setDepth(3),this.frontRim=this.scene.add.image(0,0,"rim").setOrigin(0,0).setScale(2).setVisible(!0);const t=this.frontRim.displayWidth,e=-t/2;this.frontRim.setX(e),this.add(this.frontRim),this.leftRim=this._addSideRim(e),this.rightRim=this._addSideRim(e+.9*t),this.scoreIndicator=this.scene.physics.add.sprite(e+30,40,"invisible").setBodySize(t-60,1,!1).setOrigin(0,0).setDebugBodyColor(65280),this.add(this.scoreIndicator),this.setVisible(!0)}handleBallCollision(t){this._handleSideRimCollision(t,this.leftRim),this._handleSideRimCollision(t,this.rightRim),this._listenForScore(t)}_listenForScore(t){t.scene.physics.add.overlap(t,this.scoreIndicator,(()=>{t.justScored||(t.justScored=!0,this.gameEvents.ballScored.fire({ballBounds:t.getBounds(),rimHit:t.rimHit}))}),(()=>t.body.velocity.y>=0),this)}_addSideRim(t){const e=this.scene.physics.add.sprite(t,0,"invisible").setBodySize(this.frontRim.displayHeight,this.frontRim.displayHeight,!1).setOrigin(.5,.5).setImmovable(!0).setDebugBodyColor(65280).refreshBody();return e.body.setCircle(this.frontRim.height),this.add(e),e}_handleSideRimCollision(t,e){this.scene.physics.add.collider(t,e,(e=>{e.rimHit=!0,e.tween({rotation:t.body.velocity.x>0?Math.PI/4:-Math.PI/4,duration:600}),this._playSound()}),(()=>t.body.velocity.y>=0),this)}_playSound(){this.sound.stop(),this.sound.play()}}class S extends Phaser.GameObjects.Group{constructor(t){super(t),e(this,"leftMast"),e(this,"rightMast"),e(this,"board"),e(this,"rim"),e(this,"net"),this.setVisible(!1),t.add.existing(this),this._init()}_init(){const t=n(this.scene);this.board=this.scene.add.image(t.centerX,50,"backboard").setOrigin(.5,0).setDepth(2),this.add(this.board);const e=this.board.getBottomCenter();this.rim=new _(this.scene,e.x,e.y-50).setDepth(3),this.add(this.rim),this.net=new f(this.scene,e.x,this.rim.y+3).setDepth(4),this.add(this.net);const s=this.board.getTopLeft();this.leftMast=this._addMast(s.x+50,s.y+20).setOrigin(0,1);const i=this.board.getTopRight();this.rightMast=this._addMast(i.x-50,i.y+20).setOrigin(1,1),this.setVisible(!0)}handleBallCollision(t){this.rim.handleBallCollision(t),this.net.handleBallCollision(t)}_addMast(t,e){const s=this.scene.add.image(t,e,"mast").setScale(.5).setDepth(2).setTint(16777215);return this.add(s),s}}const b=new class{constructor({rawMin:t,rawMax:s,scaleMin:i,scaleMax:h}){e(this,"rawMin"),e(this,"rawMax"),e(this,"scaleMin"),e(this,"scaleMax"),this.rawMin=t,this.rawMax=s,this.scaleMin=i,this.scaleMax=h}reverseInterpolate(t){return this.rawMin*(1-t)+this.rawMax*t}interpolate(t){return this.scaleMin*(1-t)+this.scaleMax*t}uninterpolate(t){const e=this.rawMax-this.rawMin!=0?this.rawMax-this.rawMin:1/this.rawMax;return(t-this.rawMin)/e}reverseUninterpolate(t){const e=this.scaleMax-this.scaleMin!=0?this.scaleMax-this.scaleMin:1/this.scaleMax;return(t-this.scaleMin)/e}scale(t){return t<this.rawMin&&(t=this.rawMin),t>this.rawMax&&(t=this.rawMax),this.interpolate(this.uninterpolate(t))}reverseScale(t){return t<this.scaleMin&&(t=this.scaleMin),t>this.scaleMax&&(t=this.scaleMax),this.reverseInterpolate(this.reverseUninterpolate(t))}}({rawMin:-1e3,rawMax:1e3,scaleMin:-300,scaleMax:300});class x extends Phaser.Physics.Arcade.Sprite{constructor(t,s,i){super(t,s,i,"ball",0),e(this,"gameEvents"),e(this,"animation"),e(this,"start"),e(this,"end"),e(this,"isDown",!1),e(this,"isLaunched",!1),e(this,"hasReachedApex",!1),e(this,"justScored",!1),e(this,"justMissed",!1),e(this,"rimHit",!1),e(this,"startTrackTimeEvent"),e(this,"idleYPosition"),e(this,"idleScale",1.5),e(this,"launchScale",.9),e(this,"launchParticles"),e(this,"streak",0),this.gameEvents=new y(t),this.idleYPosition=i,t.add.existing(this),t.physics.add.existing(this),this._init()}_init(){this.setDepth(4),this.setScale(this.idleScale),this.body.setCircle(this.width/2),this.setBounceY(1.2),this.setBounceX(.8),this.setInteractive({cursor:"grab"}),this._initLaunchParticles(),this._listenForInputs(),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update,this),this.gameEvents.ballAtApex.listen((()=>{this.setDepth(3)})),this.gameEvents.scoreUpdated.listen((({streak:t})=>{this.streak=t}))}_initLaunchParticles(){this.launchParticles=this.scene.add.particles(null,null,"shoot-particle",{quantity:10,tint:a.white.color,color:[a.white.color],speedY:{min:20,max:50},gravityY:-1800,lifespan:{min:100,max:300},alpha:{start:.5,end:0,ease:"Sine.easeIn"},scale:{start:.3,end:.3},frequency:30,blendMode:Phaser.BlendModes.ADD,follow:this,followOffset:{y:.8*this.height,x:0},delay:0})}update(t,e){this.isLaunched&&!this.hasReachedApex&&this.body.velocity.y>0&&(this.hasReachedApex=!0,this.launchParticles.stop(),this.gameEvents.ballAtApex.fire()),this.isLaunched&&this.y>this.scene.scale.height+250&&(this.gameEvents.ballReset.fire(),this._reset())}_handleDragStart(t){this.scene.game.canvas.style.cursor="grabbing",this.isDown=!0,this.startTrackTimeEvent=this.scene.time.addEvent({delay:200,callback:()=>{this.start=new Phaser.Math.Vector2(t.x,t.y)},callbackScope:this,loop:!0}),this.tween({scale:1.1*this.idleScale,duration:100}),this.start=new Phaser.Math.Vector2(t.x,t.y)}_handleDragEnd(t){if(this.startTrackTimeEvent&&this.startTrackTimeEvent.destroy(),this.isDown)if(this.isDown=!1,this.end=new Phaser.Math.Vector2(t.x,t.y),this.end.y<this.start.y){const t=new Phaser.Math.Vector2(this.end.x-this.start.x,this.end.y-this.start.y);var e=-2300*t.x/t.y;this._launch(e)}else this.tween({scale:this.idleScale,duration:100}),this.scene.game.canvas.style.cursor="grab";else this.tween({scale:this.idleScale,duration:100})}_launch(t){this._stopListeningForInputs(),this.isLaunched=!0,this.hasReachedApex=!1,this.launchParticles.start(),this.scene.sound.play("shoot"),t=b.scale(t),this.setGravityY(1800),this.setVelocityY(-1750),this.setVelocityX(t),this.setRotation(t/3),this.tween({scale:this.launchScale,rotation:t>0?Math.PI/4:-Math.PI/4,duration:800})}_reset(){this.isLaunched=!1,this.isDown=!1,this.hasReachedApex=!1,this.justScored=!1,this.justMissed=!1,this.rimHit=!1,this.setDepth(5),this.setGravityY(0),this.setVelocity(0,0),this.setRotation(0),this.setScale(this.idleScale);const t=n(this.scene),e=this.displayWidth/2;this.setPosition(this.streak>2?Phaser.Math.Between(t.left+e,t.right-e):t.centerX,this.scene.scale.height+this.height),this.tween({y:this.idleYPosition,duration:300,ease:Phaser.Math.Easing.Back.Out,onComplete:()=>{this._listenForInputs()}})}tween(t){this.scene.tweens.add({targets:this,ease:Phaser.Math.Easing.Linear,...t})}_listenForInputs(){this.on("pointerdown",this._handleDragStart,this),this.scene.input.on("pointerup",this._handleDragEnd,this),this.scene.input.on("pointerupoutside",this._handleDragEnd,this)}_stopListeningForInputs(){this.off("pointerdown",this._handleDragStart,this),this.scene.input.off("pointerup",this._handleDragEnd,this),this.scene.input.off("pointerupoutside",this._handleDragEnd,this)}}const w=(t,e=0)=>{var s;const i=(t=>{var e;if(!t)throw new Error("Key not specified");try{const e=localStorage.getItem(t);return null!==e?e:void 0}catch(s){console.error(`Error getting ${t} from local storage. Error: ${null==(e=s||"")?void 0:e.toString()}`,{key:t},s)}})(t);if(!i)return e;try{const t=parseInt(i);return isNaN(t)?e:t}catch(h){console.error(`Error parsing ${i} from key ${t} to int from local storage. Error: ${null==(s=h||"")?void 0:s.toString()}`,{stringValue:i,key:t},h)}return e};class v{constructor({scene:t,textStyle:s}){e(this,"scene"),e(this,"textStyle"),e(this,"duration",400),e(this,"fadeDistance",150),e(this,"scores",{}),this.scene=t,this.textStyle=M(s)}showScore(t,e){const s=((t=21)=>{let e="",s=crypto.getRandomValues(new Uint8Array(t));for(;t--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&s[t]];return e})();this.scores[s]=new Phaser.GameObjects.Text(this.scene,t.centerX,t.bottom,`+${e.toLocaleString()}`,this.textStyle),this.scores[s].setOrigin(.5,.5),this.scores[s].setName(s),this.scores[s].setAlpha(1),this.scores[s].setScale(.2),this.scores[s].setDepth(5),this.scene.add.existing(this.scores[s]),this._animateShow(this.scores[s],(()=>{this._animateFadeUp(this.scores[s])}))}_animateShow(t,e){this.scene.tweens.add({targets:t,scale:1,alpha:1,duration:500,callbackScope:this,ease:t=>Phaser.Math.Easing.Back.Out(t,5),onComplete:e})}_animateFadeUp(t){this.scene.tweens.add({targets:t,y:t.y-this.fadeDistance,ease:Phaser.Math.Easing.Sine.Out,duration:this.duration,callbackScope:this}),this.scene.time.delayedCall(this.duration/4,(()=>{this.scene.tweens.add({targets:t,alpha:0,ease:Phaser.Math.Easing.Sine.Out,duration:this.duration,yoyo:!1,callbackScope:this,onComplete:()=>{t.destroy(),this.scores[t.name]=null}})}))}}const M=t=>{const e={fontSize:80,align:"center",fontFamily:"Arial",fontStyle:"bold",stroke:a.black.rgba,color:a.primary.rgba};return t=t||{},Object.assign(e,t),e.strokeThickness||(e.strokeThickness=e.fontSize*("bold"===t.fontStyle?.1:.05)),e};class P extends Phaser.GameObjects.Container{constructor(t){super(t,0,0),e(this,"gameEvents"),e(this,"floatingScore"),e(this,"bestScoreKey","hoop_bestScore"),e(this,"currentText"),e(this,"bestText"),e(this,"best",0),e(this,"current",0),e(this,"streak",0),e(this,"interval",25),e(this,"delta",0),e(this,"scoreSoundPlayingKey"),e(this,"scoreSounds",[]),this.gameEvents=new y(this.scene),this.floatingScore=new v({scene:this.scene}),t.add.existing(this),t.physics.add.existing(this),this.init()}init(){this.scoreSounds.push(this.scene.sound.add("score-1",{volume:1.2})),this.scoreSounds.push(this.scene.sound.add("score-2",{volume:.2})),this.best=w(this.bestScoreKey);const t=this.scene.scale.width;this.currentText=this.scene.add.text(5,0,"Score: 0",{fontSize:25,fontFamily:"Arial",color:"#FFFFFF"}).setOrigin(0,0),this.bestText=this.scene.add.text(t-5,0,"Best: "+this.best.toLocaleString(),{fontSize:25,fontFamily:"Arial",color:"#FFFFFF"}).setOrigin(1,0),this.add([this.currentText,this.bestText]).setDepth(4),this.gameEvents.ballScored.listen(this._handleScore,this),this.gameEvents.ballMissed.listen(this._handleMiss,this)}_handleScore(t){const e=t.rimHit?1:2;this.current+=e,++this.streak,this.floatingScore.showScore(t.ballBounds,e),this.scene.time.delayedCall(500,this._playScoreSound,null,this),this.currentText.text="Score: "+this.current.toLocaleString(),this.current>this.best&&(this.best=this.current,this.bestText.text="Best: "+this.best.toLocaleString(),((t,e)=>{if(!t)throw new Error("Key not specified");try{localStorage.setItem(t,e.toString())}catch(s){console.error("Failed to set local storage",{key:t,value:e},s)}})(this.bestScoreKey,this.best)),this.gameEvents.scoreUpdated.fire({score:this.current,streak:this.streak}),this.scene.tweens.add({targets:this.currentText,duration:100,scale:1.1,repeat:2,alpha:0,yoyo:!0})}_handleMiss(){this.streak=0,this._stopScoreSound(),this.gameEvents.scoreUpdated.fire({score:this.current,streak:this.streak})}_playScoreSound(){this._stopScoreSound(),this.scoreSoundPlayingKey=Phaser.Math.Between(0,this.scoreSounds.length-1),this.scoreSounds[this.scoreSoundPlayingKey].play()}_stopScoreSound(){this.scoreSoundPlayingKey&&this.scoreSounds[this.scoreSoundPlayingKey].stop()}}class O extends Phaser.Scene{constructor(){super("Game"),e(this,"gameEvents"),e(this,"isBallBelowHoop",!0),e(this,"backboard"),e(this,"ball"),e(this,"court"),e(this,"barrier"),e(this,"seats"),e(this,"score"),e(this,"missIndicator"),e(this,"missSoundPlayingKey"),this.gameEvents=new y(this)}get height(){return this.scale.height}get width(){return this.scale.width}get center(){return{x:this.width/2,y:this.height/2}}create(){this.cameras.main.fadeIn(250),this.initEnvironment(),this.score=new P(this),this.backboard=new S(this),this.ball=new x(this,this.center.x,this.height-200).setOrigin(.5,.5),this.backboard.handleBallCollision(this.ball),this.initMissIndicator(this.ball),this.gameEvents.ballScored.listen(this.stopMissSound,this)}update(t,e){}initEnvironment(){this.seats=this.add.image(0,0,"seats").setOrigin(0,0).setDepth(0),this.barrier=this.add.image(0,this.seats.height-28,"barrier").setOrigin(0,0).setDepth(1),this.court=this.add.image(0,this.height-586,"court").setOrigin(.23,0).setDepth(1)}initMissIndicator(t){const{width:e,centerY:s}=n(this);this.sound.add("miss-1"),this.sound.add("miss-2"),this.sound.add("miss-3"),this.sound.add("miss-4"),this.missIndicator=this.physics.add.sprite(0,s,"invisible").setBodySize(3*e,1,!1).setOrigin(.5,.5).setDebugBodyColor(16711680),this.physics.add.overlap(t,this.missIndicator,(()=>{t.justScored||t.justMissed||(t.justMissed=!0,this.playMissSound(),this.gameEvents.ballMissed.fire())}),(()=>t.body.velocity.y>=0),this)}playMissSound(){this.stopMissSound(),this.missSoundPlayingKey=`miss-${Phaser.Math.Between(1,4)}`,this.sound.play(this.missSoundPlayingKey)}stopMissSound(){this.missSoundPlayingKey&&this.sound.stopByKey(this.missSoundPlayingKey)}}class A extends Phaser.GameObjects.NineSlice{constructor(t,s,i){var h,a,n,o;const r=t.textures.get(s.texture),d=l(s.sideWidth)?r.source[0].width/7:s.sideWidth;super(t,null!=(h=s.x)?h:0,null!=(a=s.y)?a:0,s.texture,null==(o=null==(n=s.styles)?void 0:n.default)?void 0:o.frame,r.source[0].width,r.source[0].height,d,d),e(this,"_config"),e(this,"_callback"),e(this,"_text"),e(this,"_highlighted"),e(this,"_disabled"),e(this,"_hitRect"),e(this,"_id"),e(this,"_isDown"),e(this,"_defaultScale"),this.scene=t,this._config=s,this._callback=i,this._highlighted=!1,this._disabled=!1,this._hitRect=s.hitArea?new Phaser.Geom.Rectangle(s.hitArea.x,s.hitArea.y,s.hitArea.width,s.hitArea.height):null,this._id=s.id||"",this._text=null,l(s.angle)||(this.angle=s.angle),l(s.depth)||(this.depth=s.depth),l(s.alpha)||this.setAlpha(s.alpha),l(s.defaultScale)||(this.setScale(s.defaultScale),this._defaultScale=this.scale),this.addText(),this.setOrigin(.5,.5),this.enable(),this.scene.add.existing(this)}enable(){this._hitRect?this.setInteractive({hitArea:this._hitRect,useHandCursor:!0},this.checkHitRect):this.setInteractive({useHandCursor:!0}),this.on("pointerover",this.onOver,this),this.on("pointerdown",this.onDown,this),this.on("pointerout",this.onOut,this),this.on("pointerup",this.onUp,this),this.on("tweenupdate",this._syncText,this),this._setStyle("default"),this._setTextStyle("default"),this._disabled=!1}disable(t=!0){this.off("pointerover",this.onOver,this),this.off("pointerdown",this.onDown,this),this.off("pointerout",this.onOut,this),this.off("pointerup",this.onUp,this),this.setInteractive(!1),t&&(this._setStyle("disabled"),this._setTextStyle("disabled")),this._disabled=!0}isDisabled(){return this._disabled}highlight(){this._setStyle("highlightedDefault"),this._highlighted=!0}unhighlight(){this._setStyle("default"),this._highlighted=!1}toggleHighlight(){return this._highlighted?this.unhighlight():this.highlight(),this._highlighted}isHighlighted(){return this._highlighted}onOver(t){this._highlighted?(this._setStyle("highlightedOver",["over"]),this._setTextStyle("highlightedOver",["over"])):(this._setStyle("over"),this._setTextStyle("over"))}onDown(t){this._isDown=!0,this._highlighted?(this._setStyle("highlightedDown",["down"]),this._setTextStyle("highlightedDown",["down"])):(this._setStyle("down"),this._setTextStyle("down")),this._animateScale(.95*this._defaultScale)}onOut(t){this._highlighted?(this._setStyle("highlightedDefault",["default"]),this._setTextStyle("highlightedDefault",["default"])):(this._setStyle("default"),this._setTextStyle("default")),this._animateScale(this._defaultScale)}onUp(t){this._isDown=!1,this._highlighted?(this._setStyle("highlightedOver",["over","highlightedDefault","default"]),this._setTextStyle("highlightedOver",["over","highlightedDefault","default"])):(this._setStyle("over",["default"]),this._setTextStyle("over",["default"])),this._animateScale(this._defaultScale),this._callback(this)}getId(){return this._id}setId(t){this._id=t}moveTo(t,e){this.setPosition(t,e),this.tweenTo}tweenTo(t,e,s,i="linear"){const h=[this];this._text&&h.push(this._text);const a=t-this.x,n=e-this.y;this.scene.tweens.add({targets:h,x:"+="+a,y:"+="+n,duration:s,ease:i,onUpdate:()=>{this._syncText()},callbackScope:this}),this._syncText()}checkHitRect(t,e,s,i){return e>=t.x&&e<=t.x+t.width&&s>=t.y&&s<=t.y+t.height}addText(){if(!this._config.text)return;const{centerX:t,centerY:e}=this.getBounds();this._config.text.styles||(this._config.text.styles={}),this._config.text.styles.default=T(this._config.text.styles.default),this._text=this.scene.add.text(t,e,this._config.text.value,this._config.text.styles.default),this._text.setOrigin(.5,.5),this._config.text.lineHeight&&this._text.setLineSpacing(this._config.text.lineHeight),this._text.depth=this.depth+1,l(this._config.alpha)||this._text.setAlpha(this._config.alpha)}setText(t){this._text&&(this._text.text=t)}cleanUp(){this.disable(),this._text&&this._text.destroy(),this.destroy()}setPosition(t,e,s,i){return super.setPosition(t,e,s,i),this._syncText(),this}setX(t){return super.setX(t),this._syncText(),this}setY(t){return super.setY(t),this._syncText(),this}setAlpha(t){var e,s;return super.setAlpha(t),null==(s=null==(e=this._text)?void 0:e.setAlpha)||s.call(e,t),this}_setStyle(t,e){if(!this._config.styles)return;const s=this._config.styles[t];s?(s.frame&&this.setFrame(s.frame),s.tint&&this.setTint(s.tint)):(null==e?void 0:e.length)&&this._setStyle(e[0],e.slice(1))}_setTextStyle(t,e){var s;this._text&&(null==(s=this._config.text)?void 0:s.styles)&&(this._config.text.styles[t]?this._text.setStyle(this._config.text.styles[t]):(null==e?void 0:e.length)&&this._setTextStyle(e[0],e.slice(1)))}_syncText(){if(!this._text)return;this._text.setAlpha(this.alpha),this._text.setScale(this.scale);const{centerX:t,centerY:e}=this.getBounds();this._text.setPosition(t,e)}_animateScale(t,e=100){this.scene.tweens.add({targets:this,scaleX:t,scaleY:t,duration:e,ease:Phaser.Math.Easing.Sine.InOut})}}const T=t=>{const e={fontSize:30,align:"center",fontFamily:"Arial",fontStyle:"bold",color:a.black.rgba};return t=t||{},Object.assign(e,t),e};class k extends Phaser.Scene{constructor(){super("MainMenu"),e(this,"title"),e(this,"playBtn")}create(){this.cameras.main.fadeIn(250),this.add.sprite(0,0,"menu-bg").setOrigin(0,0);const{centerX:t,centerY:e}=n(this);this.title=new d(this,{x:t,y:e,alpha:0,text:["HOOP SHOT","FRENZY"],style:{fontSize:100,fontStyle:"bold"}}),this.playBtn=new A(this,{alpha:0,defaultScale:1.5,texture:"btn",styles:{default:{tint:a.primary.lighten(30).color},over:{tint:a.primary.lighten(25).color}},text:{value:"PLAY"}},(()=>{r("Game",this)})),o(this,[this.title,this.playBtn],{gap:50}),g(this.title,"y",50),g(this.playBtn,"y",50,{delay:150,onComplete:()=>{this._initAnimations()},callbackScope:this})}_initAnimations(){this.tweens.add({targets:this.title,angle:this.title.angle-2,duration:1e3,ease:"Sine.easeInOut"}),this.tweens.add({targets:this.title,angle:this.title.angle+4,duration:2e3,ease:"Sine.easeInOut",yoyo:1,loop:-1,delay:1e3})}}const E={type:s.AUTO,width:800,height:1250,max:{width:550,height:859.375},min:{width:350,height:546.875},input:{mouse:{target:window},touch:{target:window}},parent:"game-container",pixelArt:!1,physics:{default:"arcade",arcade:{debug:!1}},scale:{mode:s.Scale.FIT,autoCenter:s.Scale.CENTER_BOTH,fullscreenTarget:"game-container",parent:"game-container"},scene:[i,p,k,O]};new s.Game(E);
