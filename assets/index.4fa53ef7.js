var t=Object.defineProperty,e=(e,s,i)=>(((e,s,i)=>{s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i})(e,"symbol"!=typeof s?s+"":s,i),i);import{P as s}from"./phaser.39311b5c.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class i extends Phaser.Scene{constructor(){super("Boot")}preload(){this.load.setPath("./assets"),this.load.image("court","court.jpg"),this.load.image("seats","seats.png"),this.load.image("barrier","barrier.jpg")}create(){this.scene.start("Preload")}}class a extends Phaser.Scene{constructor(){super("Preload")}preload(){this.load.setPath("./assets"),this.load.image("court","court.jpg"),this.load.image("seats","seats.png"),this.load.image("barrier","barrier.jpg"),this.load.image("ball","ball.png"),this.load.image("backboard","backboard.jpg"),this.load.image("shoot-particle","shoot-particle.png"),this.load.image("mast","mast.png"),this.load.image("rim","rim.png"),this.load.atlas("net","net.png","net.json"),this.loadAudio("score"),this.loadAudio("shoot"),this.loadAudio("net")}create(){this.scene.start("Play")}loadAudio(t){this.load.audio(t,[".mp3",".ogg",".m4a"].map((e=>`${t}${e}`)))}}const r="BALL_AT_APEX",h="SCORE";class n extends Phaser.Physics.Arcade.Sprite{constructor(t,s,i){super(t,s,i,"net",0),e(this,"animation"),t.add.existing(this),this.init()}init(){this.animation=this.anims.create({key:"net",frames:this.anims.generateFrameNames("net",{prefix:"net-",suffix:".png",start:1,end:4,zeroPad:2}),frameRate:15,repeat:0}),this.scene.events.on(h,(()=>{this.animate(),this.scene.sound.play("net")}))}animate(){this.play(this.animation,!0)}}class o extends Phaser.GameObjects.Container{constructor(t){super(t,0,0),e(this,"leftMast"),e(this,"rightMast"),e(this,"backboard"),e(this,"frontRim"),e(this,"leftRim"),e(this,"rightRim"),e(this,"net"),this.setVisible(!1),t.add.existing(this),this.init()}init(){const{center:t}=(t=>{const{height:e,width:s}=t.scale;return{height:e,width:s,center:{x:s/2,y:e/2}}})(this.scene);this.backboard=this.scene.add.image(t.x,50,"backboard").setOrigin(.5,0).setDepth(2);const e=this.backboard.x-this.backboard.displayWidth/2;this.leftMast=this.addMast(e+50,-125).setOrigin(0,0);const s=this.backboard.x+this.backboard.displayWidth/2;this.rightMast=this.addMast(s-50,-125).setOrigin(1,0);const i=this.backboard.y+this.backboard.displayHeight;this.frontRim=this.scene.add.image(t.x,i-50,"rim").setOrigin(.5,0).setScale(2).setDepth(2);const a=this.frontRim.x-this.frontRim.displayWidth/2;this.leftRim=this.addSideRim(a,this.frontRim.y),this.rightRim=this.addSideRim(a+.9*this.frontRim.displayWidth,this.frontRim.y),this.net=new n(this.scene,t.x,this.frontRim.y+3).setOrigin(.5,0).setScale(.75).setDepth(3),this.add([this.backboard,this.leftMast,this.rightMast,this.frontRim,this.leftRim,this.rightRim]),this.setVisible(!0),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update,this)}initBallCollision(t){this.scene.physics.add.collider(t,this.rightRim,null,(()=>t.body.velocity.y>=0),this),this.scene.physics.add.collider(t,this.leftRim,((t,e)=>{}),(()=>t.body.velocity.y>=0),this)}hasScored(t){return!!(!t.justScored&&t.hasReachedApex&&t.x>this.leftRim.x&&t.x<this.rightRim.x&&t.y>this.frontRim.y)}addMast(t,e){return this.scene.add.image(t,e,"mast").setScale(.5).setTint(16777215)}addSideRim(t,e){const s=this.scene.physics.add.staticImage(t,e,"rim").setOrigin(0,0).setScale(.2,2).setDepth(2).refreshBody();return s.body.setCircle(s.displayWidth/2),s}}const c=new class{constructor({rawMin:t,rawMax:s,scaleMin:i,scaleMax:a}){e(this,"rawMin"),e(this,"rawMax"),e(this,"scaleMin"),e(this,"scaleMax"),this.rawMin=t,this.rawMax=s,this.scaleMin=i,this.scaleMax=a}reverseInterpolate(t){return this.rawMin*(1-t)+this.rawMax*t}interpolate(t){return this.scaleMin*(1-t)+this.scaleMax*t}uninterpolate(t){const e=this.rawMax-this.rawMin!=0?this.rawMax-this.rawMin:1/this.rawMax;return(t-this.rawMin)/e}reverseUninterpolate(t){const e=this.scaleMax-this.scaleMin!=0?this.scaleMax-this.scaleMin:1/this.scaleMax;return(t-this.scaleMin)/e}scale(t){return t<this.rawMin&&(t=this.rawMin),t>this.rawMax&&(t=this.rawMax),this.interpolate(this.uninterpolate(t))}reverseScale(t){return t<this.scaleMin&&(t=this.scaleMin),t>this.scaleMax&&(t=this.scaleMax),this.reverseInterpolate(this.reverseUninterpolate(t))}}({rawMin:-1e3,rawMax:1e3,scaleMin:-200,scaleMax:200});class l extends Phaser.Physics.Arcade.Sprite{constructor(t,s,i){super(t,s,i,"ball",0),e(this,"animation"),e(this,"start"),e(this,"end"),e(this,"isDown",!1),e(this,"isLaunched",!1),e(this,"hasReachedApex",!1),e(this,"justScored",!1),e(this,"startTrackTimeEvent"),e(this,"idlePosition"),e(this,"idleScale",1.5),e(this,"launchScale",.9),e(this,"launchParticles"),this.idlePosition=new Phaser.Math.Vector2(s,i),t.add.existing(this),t.physics.add.existing(this),this.init()}init(){this.setDepth(4),this.setScale(this.idleScale),this.body.setCircle(this.width/2),this.setBounceY(.8),this.setBounceX(.8),this.setInteractive({cursor:"grab"}),this.on("pointerdown",(t=>{this.scene.game.canvas.style.cursor="grabbing",this.isDown=!0,this.startTrackTimeEvent=this.scene.time.addEvent({delay:200,callback:()=>{this.start=new Phaser.Math.Vector2(t.x,t.y)},callbackScope:this,loop:!0}),this.tween({scale:1.1*this.idleScale,duration:100}),this.start=new Phaser.Math.Vector2(t.x,t.y)})),this.scene.input.on("pointerup",(t=>{if(this.startTrackTimeEvent&&this.startTrackTimeEvent.destroy(),this.isDown)if(this.isDown=!1,this.end=new Phaser.Math.Vector2(t.x,t.y),this.end.y<this.start.y){const t=new Phaser.Math.Vector2(this.end.x-this.start.x,this.end.y-this.start.y);var e=-2300*t.x/t.y;this.launch(e)}else this.tween({scale:this.idleScale,duration:100}),this.scene.game.canvas.style.cursor="grab";else this.tween({scale:this.idleScale,duration:100})}),this),this.launchParticles=this.scene.add.particles(null,null,"shoot-particle",{quantity:10,speedY:{min:20,max:50},lifespan:{min:100,max:300},alpha:{start:.5,end:0,ease:"Sine.easeIn"},scale:{start:.3,end:.1},blendMode:"ADD",frequency:30,follow:this,followOffset:{y:this.height/2,x:0},delay:0}),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update,this)}update(t,e){this.isLaunched&&!this.hasReachedApex&&this.body.velocity.y>0&&(this.hasReachedApex=!0,this.launchParticles.stop(),this.scene.events.emit(r))}launch(t){this.isLaunched=!0,this.hasReachedApex=!1,this.launchParticles.start(),this.scene.sound.play("shoot"),t=c.scale(t),this.setGravityY(1800),this.setVelocityY(-1750),this.setVelocityX(t),this.setRotation(t/3),this.tween({scale:this.launchScale,rotation:t>0?Math.PI/4:-Math.PI/4,duration:800})}reset(){this.isLaunched=!1,this.isDown=!1,this.hasReachedApex=!1,this.justScored=!1,this.setDepth(4),this.setGravityY(0),this.setVelocity(0,0),this.setRotation(0),this.setScale(this.idleScale),this.setPosition(this.idlePosition.x,this.idlePosition.y-150),this.tween({y:this.idlePosition.y,duration:250})}tween(t){this.scene.tweens.add({targets:this,ease:Phaser.Math.Easing.Linear,...t})}}const d=(t,e=0)=>{var s;const i=(t=>{var e;if(!t)throw new Error("Key not specified");try{const e=localStorage.getItem(t);return null!==e?e:void 0}catch(s){console.error(`Error getting ${t} from local storage. Error: ${null==(e=s||"")?void 0:e.toString()}`,{key:t},s)}})(t);if(!i)return e;try{const t=parseInt(i);return isNaN(t)?e:t}catch(a){console.error(`Error parsing ${i} from key ${t} to int from local storage. Error: ${null==(s=a||"")?void 0:s.toString()}`,{stringValue:i,key:t},a)}return e};class u extends Phaser.GameObjects.Container{constructor(t){super(t,0,0),e(this,"bestScoreKey","hoop_bestScore"),e(this,"currentText"),e(this,"bestText"),e(this,"best",0),e(this,"current",0),e(this,"interval",25),e(this,"delta",0),t.add.existing(this),t.physics.add.existing(this),this.init()}init(){this.scene.sound.add("score"),this.best=d(this.bestScoreKey);const t=this.scene.scale.width;this.currentText=this.scene.add.text(5,0,"Score: 0",{fontSize:25,fontFamily:"Arial",color:"#FFFFFF"}).setOrigin(0,0),this.bestText=this.scene.add.text(t-5,0,"Best: "+this.best.toLocaleString(),{fontSize:25,fontFamily:"Arial",color:"#FFFFFF"}).setOrigin(1,0),this.add([this.currentText,this.bestText]).setDepth(4),this.scene.events.on(h,(()=>{this.increaseScore(),this.scene.tweens.add({targets:this.currentText,duration:100,scale:1.1,repeat:2,alpha:0,yoyo:!0})}),this)}increaseScore(){++this.current,this.scene.time.delayedCall(500,(()=>this.scene.sound.play("score")),null,this),this.currentText.text="Score: "+this.current.toLocaleString(),this.current>this.best&&(this.best=this.current,this.bestText.text="Best: "+this.best.toLocaleString(),((t,e)=>{if(!t)throw new Error("Key not specified");try{localStorage.setItem(t,e.toString())}catch(s){console.error("Failed to set local storage",{key:t,value:e},s)}})(this.bestScoreKey,this.best))}}class p extends Phaser.Scene{constructor(){super("Play"),e(this,"isBallBelowHoop",!0),e(this,"backboard"),e(this,"ball"),e(this,"court"),e(this,"barrier"),e(this,"seats"),e(this,"score")}get height(){return this.scale.height}get width(){return this.scale.width}get center(){return{x:this.width/2,y:this.height/2}}create(){this.initEnvironment(),this.score=new u(this),this.backboard=new o(this),this.ball=new l(this,this.center.x,this.height-200).setOrigin(.5,.5),this.backboard.initBallCollision(this.ball),this.events.on(r,(()=>{this.ball.setDepth(this.backboard.net.depth-1)}),this)}update(t,e){this.backboard.hasScored(this.ball)&&(this.ball.justScored=!0,this.events.emit(h)),this.ball.y>this.height+250&&this.ball.reset()}initEnvironment(){this.seats=this.add.image(0,0,"seats").setOrigin(0,0).setDepth(0),this.barrier=this.add.image(0,this.seats.height-28,"barrier").setOrigin(0,0).setDepth(1),this.court=this.add.image(0,this.height-586,"court").setOrigin(.23,0).setDepth(1)}}const g={type:s.AUTO,width:800,height:1250,max:{width:550,height:859.375},min:{width:350,height:546.875},parent:"game-container",pixelArt:!0,autoFocus:!0,physics:{default:"arcade",arcade:{debug:!1}},scale:{mode:s.Scale.FIT,autoCenter:s.Scale.CENTER_BOTH,fullscreenTarget:"game-container",parent:"game-container"},scene:[i,a,p]};new s.Game(g);
